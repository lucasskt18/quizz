<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>📖 Quiz: Mulheres na Bíblia</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .quiz-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 1000px;
            width: 100%;
            padding: 40px 50px;
            position: relative;
            overflow: hidden;
        }

        .quiz-header {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            padding-right: clamp(75px, 12vw, 100px);
            border-bottom: 2px solid #f0f0f0;
            position: relative;
        }

        .quiz-header-logo {
            max-width: 250px;
            max-height: 100px;
            width: auto;
            height: auto;
            border-radius: 8px;
            transition: transform 0.3s ease;
        }

        .quiz-header-logo:hover {
            transform: scale(1.02);
        }

        .btn-reset {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            padding: 6px 12px;
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            color: #666;
            font-weight: 600;
            transition: all 0.3s ease;
            touch-action: manipulation;
            white-space: nowrap;
            max-width: 90px;
        }

        .btn-reset:hover {
            background: #f0f0ff;
            border-color: #764ba2;
            color: #764ba2;
            transform: translateY(-50%) scale(1.05);
        }

        .btn-reset:active {
            transform: translateY(-50%) scale(0.95);
        }

        .results-screen .quiz-header {
            border-bottom: none;
            margin-bottom: 10px;
            padding-bottom: 0;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .question-number {
            font-size: 18px;
            color: #764ba2;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .question-text {
            font-size: 32px;
            color: #333;
            margin-bottom: 35px;
            line-height: 1.5;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .option {
            padding: 25px;
            min-height: 70px;
            background: #f8f9fa;
            border: 3px solid #e0e0e0;
            border-radius: 12px;
            cursor: pointer;
            touch-action: manipulation;
            transition: all 0.3s ease;
            font-size: 20px;
            color: #333;
            display: flex;
            align-items: center;
        }

        .option:hover {
            background: #e9ecef;
            border-color: #667eea;
            transform: translateX(5px);
        }

        .option:active {
            transform: scale(0.98);
            background: #dee2e6;
        }

        .option.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #764ba2;
        }

        .option.correct {
            background: #28a745;
            color: white;
            border-color: #28a745;
        }

        .option.incorrect {
            background: #dc3545;
            color: white;
            border-color: #dc3545;
        }

        .navigation {
            margin-top: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn {
            padding: 20px 50px;
            min-height: 60px;
            font-size: 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            touch-action: manipulation;
            transition: all 0.3s ease;
            font-weight: 600;
            min-width: 150px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .results-screen {
            text-align: center;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .results-title {
            font-size: 36px;
            color: #764ba2;
            margin-bottom: 20px;
        }

        .score {
            font-size: 72px;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 30px 0;
        }

        .score-text {
            font-size: 24px;
            color: #666;
            margin-bottom: 40px;
        }

        .message {
            font-size: 18px;
            color: #333;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            margin-bottom: 30px;
            line-height: 1.5;
            max-width: 100%;
            word-wrap: break-word;
        }

        .logo-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo {
            max-width: 300px;
            max-height: 150px;
            width: auto;
            height: auto;
            margin-bottom: 20px;
            border-radius: 8px;
        }

        .start-screen {
            text-align: center;
        }

        .start-title {
            font-size: 48px;
            color: #764ba2;
            margin-bottom: 20px;
        }

        .steps {
            text-align: left;
            margin: 0 auto 28px auto;
            max-width: 860px;
            background: linear-gradient(180deg, #ffffff 0%, #fafbff 100%);
            border: 1px solid rgba(118, 75, 162, 0.18);
            border-radius: 18px;
            padding: 18px 22px 20px 22px;
            box-shadow: 0 12px 40px rgba(44, 19, 87, 0.08);
            position: relative;
        }

        .steps:before {
            content: "";
            position: absolute;
            inset: 0;
            border-radius: 18px;
            padding: 1px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.55), rgba(118, 75, 162, 0.55));
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            pointer-events: none;
        }

        .steps-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 14px;
        }

        .steps-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 34px;
            height: 34px;
            border-radius: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            box-shadow: 0 6px 16px rgba(118, 75, 162, 0.35);
            font-weight: 700;
        }

        .steps-title {
            font-size: 22px;
            color: #4a4793;
            font-weight: 700;
        }

        .steps-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 14px;
            font-size: 18px;
            color: #2d2d2d;
            margin: 0;
            padding: 0;
        }

        .steps-item {
            display: grid;
            grid-template-columns: 38px 1fr;
            align-items: start;
            gap: 12px;
        }

        .steps-num {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            background: #eef0ff;
            border: 1px solid #d8dbff;
            color: #4a4793;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
        }

        .handle {
            display: inline-block;
            background: #eef0ff;
            border: 1px solid #d8dbff;
            color: #3b3a8f;
            border-radius: 999px;
            padding: 6px 10px;
            font-weight: 700;
            text-decoration: none;
            margin-right: 6px;
            transition: all .2s ease;
        }

        .handle:not(.no-link):hover {
            background: #e2e6ff;
            transform: translateY(-1px);
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.25);
        }

        .handle.no-link {
            pointer-events: none;
            cursor: default;
        }

        .steps-note {
            margin-top: 10px;
            font-size: 14px;
            color: #6b6b6b;
        }

        .start-description {
            font-size: 20px;
            color: #666;
            margin-bottom: 40px;
            line-height: 1.6;
        }

        .timer {
            font-size: 24px;
            color: #764ba2;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .timer.warning {
            color: #dc3545;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        :root {
            --scale: clamp(14px, 1.2vmin + 0.6vw, 24px);
            --container-max: min(92vw, 1400px);
        }

        html,
        body {
            font-size: var(--scale);
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
            overscroll-behavior: none;
            touch-action: manipulation;
        }

        .quiz-container {
            max-width: var(--container-max);
            padding-block: clamp(16px, 2.5vmin, 32px);
            padding-inline: clamp(16px, 5vw, 96px);
            border-radius: clamp(12px, 1.2vmin, 20px);
        }

        .quiz-header-logo,
        .logo {
            max-width: clamp(180px, 28vmin, 380px);
            max-height: clamp(80px, 12vmin, 180px);
        }

        .progress-bar {
            height: clamp(8px, 1vmin, 14px);
        }

        .question-number {
            font-size: clamp(1rem, 2.2vmin, 1.4rem);
        }

        .question-text {
            font-size: clamp(1.4rem, 3.2vmin, 2.4rem);
        }

        .options {
            gap: clamp(0.75rem, 2vmin, 1.5rem);
        }

        .option {
            font-size: clamp(1rem, 2.5vmin, 1.5rem);
            padding: clamp(1rem, 2.4vmin, 2rem);
            min-height: clamp(3rem, 6vmin, 5rem);
            border-width: clamp(2px, 0.4vmin, 4px);
            border-radius: clamp(10px, 1.4vmin, 16px);
        }

        .navigation {
            margin-top: clamp(1rem, 2.5vmin, 2rem);
        }

        .btn {
            font-size: clamp(1rem, 2.6vmin, 1.5rem);
            padding: clamp(0.8rem, 2.4vmin, 1.6rem) clamp(1.6rem, 4vmin, 3.2rem);
            min-height: clamp(3rem, 6vmin, 4.5rem);
            min-width: clamp(8rem, 16vmin, 12rem);
            border-radius: clamp(10px, 1.2vmin, 14px);
        }

        .results-title {
            font-size: clamp(1.6rem, 3.4vmin, 2.4rem);
        }

        .score {
            font-size: clamp(2.5rem, 8vmin, 5rem);
        }

        .score-text {
            font-size: clamp(1.1rem, 2.6vmin, 1.6rem);
        }

        .message {
            font-size: clamp(1rem, 2.2vmin, 1.25rem);
            padding: clamp(0.8rem, 2vmin, 1.4rem);
        }

        .start-title {
            font-size: clamp(1.8rem, 4.2vmin, 3rem);
        }

        .start-description {
            font-size: clamp(1rem, 2.4vmin, 1.25rem);
        }

        .timer {
            font-size: clamp(1rem, 2.6vmin, 1.5rem);
        }

        .btn-reset {
            font-size: clamp(10px, 1.2vmin, 12px);
            padding: clamp(5px, 0.8vmin, 6px) clamp(8px, 1.5vmin, 12px);
            max-width: clamp(70px, 12vmin, 90px);
        }

        @media (orientation: portrait) {
            .quiz-container {
                max-width: 96vw;
                min-height: 88vh;
            }

            .options {
                gap: clamp(0.75rem, 3vmin, 2rem);
            }

            .quiz-header {
                padding-right: clamp(65px, 10vw, 85px);
            }

            .btn-reset {
                position: absolute;
                transform: translateY(-50%);
                padding: 5px 10px;
                font-size: 11px;
                max-width: 80px;
                right: 0;
            }
        }

        @media (max-width: 600px) {
            .quiz-header {
                flex-direction: row;
                padding-right: clamp(60px, 9vw, 75px);
            }

            .btn-reset {
                position: absolute;
                transform: translateY(-50%);
                padding: 5px 8px;
                font-size: 10px;
                max-width: 70px;
                right: 0;
            }
        }

        /* Modal de Confirmação */
        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            max-width: 500px;
            width: 100%;
            padding: 40px;
            text-align: center;
            animation: slideIn 0.3s ease;
            position: relative;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-30px) scale(0.9);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-title {
            font-size: 28px;
            color: #764ba2;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .modal-message {
            font-size: 18px;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .modal-btn {
            padding: 15px 35px;
            min-height: 50px;
            font-size: 18px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            touch-action: manipulation;
            transition: all 0.3s ease;
            font-weight: 600;
            min-width: 120px;
        }

        .modal-btn-cancel {
            background: #f8f9fa;
            color: #666;
            border: 2px solid #e0e0e0;
        }

        .modal-btn-cancel:hover {
            background: #e9ecef;
            border-color: #adb5bd;
            transform: translateY(-2px);
        }

        .modal-btn-confirm {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .modal-btn-confirm:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .modal-btn:active {
            transform: scale(0.95);
        }

        @media (max-width: 600px) {
            .modal {
                padding: 30px 20px;
            }

            .modal-title {
                font-size: clamp(1.4rem, 4vmin, 1.8rem);
            }

            .modal-message {
                font-size: clamp(1rem, 2.4vmin, 1.15rem);
            }

            .modal-buttons {
                flex-direction: column;
            }

            .modal-btn {
                width: 100%;
                font-size: clamp(1rem, 2.4vmin, 1.15rem);
            }
        }

        img {
            -webkit-user-drag: none;
        }
    </style>
</head>

<body>
    <div class="quiz-container" id="quizContainer">
    </div>

    <!-- Modal de Confirmação -->
    <div class="modal-overlay" id="resetModal">
        <div class="modal">
            <h2 class="modal-title">⚠️ Reiniciar Quiz</h2>
            <p class="modal-message">Tem certeza que deseja reiniciar o quiz? Todo o progresso será perdido.</p>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-cancel" onclick="closeResetModal()">Cancelar</button>
                <button class="modal-btn modal-btn-confirm" onclick="confirmReset()">Sim, Reiniciar</button>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "Quem foi a primeira mulher criada por Deus?",
                options: ["Sara", "Rebeca", "Eva", "Raquel"],
                correct: 2
            },
            {
                question: "Qual mulher foi escolhida para ser mãe de Jesus?",
                options: ["Marta", "Isabel", "Maria", "Ester"],
                correct: 2
            },
            {
                question: "Quem se tornou rainha e intercedeu pelo povo judeu, salvando-os da morte?",
                options: ["Ester", "Débora", "Rute", "Abigail"],
                correct: 0
            },
            {
                question: "Qual mulher ficou famosa por olhar para trás e se transformar em uma estátua de sal?",
                options: ["A esposa de Noé", "A esposa de Ló", "A esposa de Jacó", "A esposa de Abraão"],
                correct: 1
            },
            {
                question: "Quem foi a sogra de Rute, que a acompanhou de volta a Belém?",
                options: ["Sara", "Ana", "Noemi", "Elisabete"],
                correct: 2
            },
            {
                question: "Qual juíza e profetisa liderou Israel em tempos de guerra?",
                options: ["Ana", "Débora", "Miriã", "Hulda"],
                correct: 1
            },
            {
                question: "Qual mulher ajudou a esconder os espias em Jericó e foi salva por sua fé?",
                options: ["Raabe", "Dalila", "Rebeca", "Joquebede"],
                correct: 0
            },
            {
                question: "\"Cobrir de violência as suas vestes\" descreve quem se envolve em atos cruéis como se vestisse a violência. Em qual livro Deus diz que odeia quem faz isso?",
                options: ["Deuteronômio", "Malaquias", "Juízes", "Levítico"],
                correct: 1
            },
            {
                question: "Qual mulher é citada como construtora notável na Bíblia?",
                options: ["Jael", "Mulher de Manoá", "Zilpa", "Seerá"],
                correct: 3
            },
            {
                question: "O direito de herdar foi concedido às mulheres em 1405-1406 a.C. Em qual livro isso está registrado?",
                options: ["Levítico", "Números", "Juízes", "Deuteronômio"],
                correct: 1
            }
        ];

        let currentQuestion = 0;
        let answers = [];
        let timeLeft = 0;
        let timerInterval = null;

        let previewConfig = null;

        function parsePreviewParam() {
            const params = new URLSearchParams(location.search);
            const p = params.get('preview');
            if (!p) return null;
            const m = p.match(/^(\d+)x(\d+)$/i);
            if (!m) return null;
            const targetWidth = parseInt(m[1], 10);
            const targetHeight = parseInt(m[2], 10);
            return { targetWidth, targetHeight };
        }

        function ensurePreviewStage() {
            let stage = document.getElementById('previewStage');
            if (!stage) {
                stage = document.createElement('div');
                stage.id = 'previewStage';
                stage.style.position = 'fixed';
                stage.style.inset = '0';
                stage.style.background = '#0b0b0f';
                stage.style.display = 'flex';
                stage.style.alignItems = 'center';
                stage.style.justifyContent = 'center';
                stage.style.padding = '16px';
                stage.style.zIndex = '999';
                document.body.appendChild(stage);
            }
            let frame = document.getElementById('previewFrame');
            if (!frame) {
                frame = document.createElement('div');
                frame.id = 'previewFrame';
                frame.style.position = 'relative';
                frame.style.overflow = 'hidden';
                frame.style.background = 'transparent';
                frame.style.boxShadow = '0 20px 60px rgba(0,0,0,0.6)';
                frame.style.borderRadius = '18px';
                stage.appendChild(frame);
            }
            return { stage, frame };
        }

        function mountQuizIntoFrame() {
            const frame = document.getElementById('previewFrame');
            const quiz = document.getElementById('quizContainer');
            if (frame && quiz && quiz.parentElement !== frame) {
                frame.appendChild(quiz);
            }
        }

        function updatePreviewScale() {
            if (!previewConfig) return;
            const { targetWidth, targetHeight } = previewConfig;
            const { frame } = ensurePreviewStage();
            frame.style.width = targetWidth + 'px';
            frame.style.height = targetHeight + 'px';
            const scaleX = (window.innerWidth - 32) / targetWidth;
            const scaleY = (window.innerHeight - 32) / targetHeight;
            const scale = Math.min(scaleX, scaleY);
            frame.style.transform = `scale(${scale})`;
            frame.style.transformOrigin = 'center center';
        }

        function setupPreviewIfRequested() {
            previewConfig = parsePreviewParam();
            if (!previewConfig) return;
            ensurePreviewStage();
            mountQuizIntoFrame();
            updatePreviewScale();
            window.addEventListener('resize', updatePreviewScale);
        }

        function initQuiz() {
            setupPreviewIfRequested();
            showStartScreen();
            setupKioskGuards();
            setupModalClose();
        }

        function showStartScreen() {
            const container = document.getElementById('quizContainer');
            container.innerHTML = `
                <div class="start-screen">
                    <div class="logo-container">
                        <img src="assets/WhatsApp Image 2025-10-26 at 09.18.04_fd777bb4.jpg" alt="Logo" class="logo" />
                    </div>
                    <h1 class="start-title">📖 Quiz: Mulheres na Bíblia</h1>
                    <div class="steps">
                        <div class="steps-header">
                            <div class="steps-icon">✓</div>
                            <div class="steps-title">Antes de iniciar, siga estes passos</div>
                        </div>
                        <ul class="steps-list">
                            <li class="steps-item">
                                <div class="steps-num">1</div>
                                <div>
                                    Siga os três perfis:
                                    <span class="handle no-link">@yisakhar</span>
                                    <span class="handle no-link">@alessandrabatista.lmp</span>
                                    <span class="handle no-link">@crearemarketingbrasil</span>
                                </div>
                            </li>
                            <li class="steps-item">
                                <div class="steps-num">2</div>
                                <div>Agora tire uma foto 📸 mostrando o totem e marque os três perfis que você acabou de seguir.</div>
                            </li>
                            <li class="steps-item">
                                <div class="steps-num">3</div>
                                <div>Vamos lá? As mulheres na Bíblia foram protagonistas de histórias incríveis — vamos testar seus conhecimentos!</div>
                            </li>
                        </ul>
                    </div>
                    <p class="start-description">Tudo pronto? <strong>clique aqui para iniciar</strong>.</p>
                    <button class="btn btn-primary" onclick="startQuiz()">Iniciar Quiz</button>
                </div>
            `;
        }

        function startQuiz() {
            currentQuestion = 0;
            answers = [];
            showQuestion();
        }

        function resetQuiz() {
            const modal = document.getElementById('resetModal');
            modal.classList.add('show');
        }

        function closeResetModal() {
            const modal = document.getElementById('resetModal');
            modal.classList.remove('show');
        }

        function confirmReset() {
            currentQuestion = 0;
            answers = [];
            const container = document.getElementById('quizContainer');
            container.classList.remove('results-screen');
            closeResetModal();
            showStartScreen();
        }

        // Fechar modal ao clicar no overlay (fora do modal)
        function setupModalClose() {
            const modal = document.getElementById('resetModal');
            if (modal && !modal.hasAttribute('data-listener-added')) {
                modal.addEventListener('click', function (e) {
                    if (e.target === modal) {
                        closeResetModal();
                    }
                });
                modal.setAttribute('data-listener-added', 'true');
            }
        }

        // Configurar o modal quando a página carregar
        document.addEventListener('DOMContentLoaded', setupModalClose);

        function showQuestion() {
            const question = questions[currentQuestion];
            const progress = ((currentQuestion + 1) / questions.length) * 100;

            const previouslySelected = answers[currentQuestion];

            const container = document.getElementById('quizContainer');
            container.innerHTML = `
                <div class="quiz-header">
                    <img src="assets/WhatsApp Image 2025-10-26 at 09.18.04_fd777bb4.jpg" alt="Logo" class="quiz-header-logo" />
                    <button class="btn-reset" onclick="resetQuiz()" title="Reiniciar quiz">
                        ↻ Reiniciar
                    </button>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: ${progress}%"></div>
                </div>
                <div class="question-number">Pergunta ${currentQuestion + 1} de ${questions.length}</div>
                <div class="question-text">${question.question}</div>
                <div class="options" id="options">
                    ${question.options.map((option, index) => `
                        <div class="option${previouslySelected === index ? ' selected' : ''}" onclick="selectOption(${index})">
                            ${String.fromCharCode(65 + index)}) ${option}
                        </div>
                    `).join('')}
                </div>
                <div class="navigation">
                    <button class="btn" onclick="previousQuestion()" ${currentQuestion === 0 ? 'disabled' : ''}>
                        ← Anterior
                    </button>
                    <button class="btn btn-primary" onclick="nextQuestion()" id="nextBtn" ${previouslySelected !== undefined ? '' : 'disabled'}>
                        ${currentQuestion === questions.length - 1 ? 'Finalizar' : 'Próxima →'}
                    </button>
                </div>
            `;
        }

        function selectOption(index) {
            answers[currentQuestion] = index;

            const options = document.querySelectorAll('.option');
            options.forEach((opt, i) => {
                if (i === index) {
                    opt.classList.add('selected');
                } else {
                    opt.classList.remove('selected');
                }
            });

            document.getElementById('nextBtn').disabled = false;
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                showResults();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        function calculateScore() {
            let score = 0;
            questions.forEach((question, index) => {
                if (answers[index] === question.correct) {
                    score++;
                }
            });
            return score;
        }

        function showResults() {
            const score = calculateScore();
            const percentage = Math.round((score / questions.length) * 100);

            let message = "";
            if (percentage === 100) {
                message = "🎉 Parabéns você acertou tudo! Retire seu brinde na sala de recepção.";
            } else if (percentage >= 70) {
                message = "👍 Muito bem! Ótimo desempenho!";
            } else if (percentage >= 50) {
                message = "👌 Bom trabalho! Continue assim!";
            } else {
                message = "💪 Continue tentando! Você consegue!";
            }

            const container = document.getElementById('quizContainer');
            container.classList.add('results-screen');
            container.innerHTML = `
                <div class="results-screen">
                    <div class="quiz-header">
                        <img src="assets/WhatsApp Image 2025-10-26 at 09.18.04_fd777bb4.jpg" alt="Logo" class="quiz-header-logo" />
                    </div>
                    <h1 class="results-title">🎯 Resultado Final</h1>
                    <div class="score">${score}/${questions.length}</div>
                    <div class="score-text">${percentage}% de acertos</div>
                    <div class="message">${message}</div>
                    <button class="btn btn-primary" onclick="location.reload()">
                        Fazer Novamente
                    </button>
                </div>
            `;

            saveResults(score, percentage);
        }

        function saveResults(score, percentage) {
            const date = new Date().toLocaleString('pt-BR');
            const result = {
                date: date,
                score: score,
                total: questions.length,
                percentage: percentage
            };

            let results = JSON.parse(localStorage.getItem('quizResults') || '[]');
            results.push(result);

            if (results.length > 100) {
                results = results.slice(-100);
            }

            localStorage.setItem('quizResults', JSON.stringify(results));
        }

        // Fortificações para uso em totem (touch/kiosk)
        function setupKioskGuards() {
            // Desativa menu de contexto
            document.addEventListener('contextmenu', function (e) { e.preventDefault(); }, { passive: false });
            // Bloqueia pinch-zoom (gesture) em navegadores WebKit/Chromium
            window.addEventListener('gesturestart', function (e) { e.preventDefault(); }, { passive: false });
            window.addEventListener('gesturechange', function (e) { e.preventDefault(); }, { passive: false });
            window.addEventListener('gestureend', function (e) { e.preventDefault(); }, { passive: false });
            // Bloqueia zoom por scroll com Ctrl
            window.addEventListener('wheel', function (e) {
                if (e.ctrlKey) e.preventDefault();
            }, { passive: false });
            // Evita arrasto de imagens/elementos (será atualizado após renderizar)
            setTimeout(function () {
                document.querySelectorAll('img, a, button, .option').forEach(function (el) {
                    el.setAttribute('draggable', 'false');
                });
            }, 100);
            // Reduz chance de double-tap zoom em alguns UAs antigos
            let lastTouchTime = 0;
            document.addEventListener('touchend', function (e) {
                const now = Date.now();
                if (now - lastTouchTime < 350) {
                    e.preventDefault();
                }
                lastTouchTime = now;
            }, { passive: false });
        }

        initQuiz();
    </script>
</body>

</html>